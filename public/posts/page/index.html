<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Integrating Apache Kafka with Spring Boot | praj-mkdir</title>
<meta name="keywords" content="kafka">
<meta name="description" content="Integrating Apache Kafka with Spring Boot
Apache Kafka is a robust distributed event-streaming platform that enables high-throughput, real-time data pipelines and event-driven applications. Integrating Kafka with Spring Boot provides developers with a seamless way to produce and consume messages, making it ideal for building scalable and resilient systems.
This article will guide you through setting up Kafka integration with Spring Boot using Spring Kafka&rsquo;s auto-configuration. By the end, you&rsquo;ll have a functional Spring Boot application with a producer, consumer, and controller to test the setup.">
<meta name="author" content="Me">
<link rel="canonical" href="http://localhost:1313/posts/page/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.36819bea596090d8b48cf10d9831382996197aa7e4fc86f792f7c08c9ca4d23b.css" integrity="sha256-NoGb6llgkNi0jPENmDE4KZYZeqfk/Ib3kvfAjJyk0js=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/page/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="praj-mkdir (Alt + H)">praj-mkdir</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/about/" title="about">
                    <span>about</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/archives" title="blog">
                    <span>blog</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/contact/" title="contact">
                    <span>contact</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/now/" title="now">
                    <span>now</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Integrating Apache Kafka with Spring Boot
    </h1>
    <div class="post-meta"><span title='2020-09-15 11:30:03 +0000 +0000'>September 15, 2020</span>&nbsp;·&nbsp;Me

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#integrating-apache-kafka-with-spring-boot" aria-label="Integrating Apache Kafka with Spring Boot">Integrating Apache Kafka with Spring Boot</a><ul>
                        
                <li>
                    <a href="#prerequisites" aria-label="Prerequisites">Prerequisites</a></li>
                <li>
                    <a href="#1-spring-boot-project-setup" aria-label="1. Spring Boot Project Setup">1. Spring Boot Project Setup</a><ul>
                        
                <li>
                    <a href="#add-dependencies" aria-label="Add Dependencies">Add Dependencies</a></li>
                <li>
                    <a href="#configure-kafka-properties" aria-label="Configure Kafka Properties">Configure Kafka Properties</a></li></ul>
                </li>
                <li>
                    <a href="#2-implementing-the-producer-consumer-and-controller" aria-label="2. Implementing the Producer, Consumer, and Controller">2. Implementing the Producer, Consumer, and Controller</a><ul>
                        
                <li>
                    <a href="#producer-implementation" aria-label="Producer Implementation">Producer Implementation</a></li>
                <li>
                    <a href="#consumer-implementation" aria-label="Consumer Implementation">Consumer Implementation</a></li>
                <li>
                    <a href="#controller-implementation" aria-label="Controller Implementation">Controller Implementation</a></li></ul>
                </li>
                <li>
                    <a href="#3-defining-kafka-topics-in-configuration" aria-label="3. Defining Kafka Topics in Configuration">3. Defining Kafka Topics in Configuration</a></li>
                <li>
                    <a href="#4-testing-the-application" aria-label="4. Testing the Application">4. Testing the Application</a><ul>
                        
                <li>
                    <a href="#start-the-kafka-environment" aria-label="Start the Kafka Environment">Start the Kafka Environment</a></li>
                <li>
                    <a href="#run-the-application" aria-label="Run the Application">Run the Application</a></li>
                <li>
                    <a href="#publish-a-message" aria-label="Publish a Message">Publish a Message</a></li>
                <li>
                    <a href="#verify-the-output" aria-label="Verify the Output">Verify the Output</a></li></ul>
                </li>
                <li>
                    <a href="#5-advantages-of-auto-configuration" aria-label="5. Advantages of Auto-Configuration">5. Advantages of Auto-Configuration</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="integrating-apache-kafka-with-spring-boot">Integrating Apache Kafka with Spring Boot<a hidden class="anchor" aria-hidden="true" href="#integrating-apache-kafka-with-spring-boot">#</a></h1>
<p>Apache Kafka is a robust distributed event-streaming platform that enables high-throughput, real-time data pipelines and event-driven applications. Integrating Kafka with Spring Boot provides developers with a seamless way to produce and consume messages, making it ideal for building scalable and resilient systems.</p>
<p>This article will guide you through setting up Kafka integration with Spring Boot using Spring Kafka&rsquo;s auto-configuration. By the end, you&rsquo;ll have a functional Spring Boot application with a producer, consumer, and controller to test the setup.</p>
<h2 id="prerequisites">Prerequisites<a hidden class="anchor" aria-hidden="true" href="#prerequisites">#</a></h2>
<ol>
<li>
<p><strong>Java Development Kit (JDK)</strong>: Install JDK 11 or higher.</p>
</li>
<li>
<p><strong>Apache Kafka and Zookeeper (via Docker)</strong>: Use Docker to set up Kafka and Zookeeper. Create a <code>docker-compose.yml</code> file with the following content:</p>
</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">version</span>: <span style="color:#e6db74">&#39;3&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">services</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">zookeeper</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">image</span>: <span style="color:#ae81ff">confluentinc/cp-zookeeper:latest</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">environment</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">ZOOKEEPER_CLIENT_PORT</span>: <span style="color:#ae81ff">2181</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">ZOOKEEPER_TICK_TIME</span>: <span style="color:#ae81ff">2000</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#e6db74">&#34;2181:2181&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">kafka</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">image</span>: <span style="color:#ae81ff">confluentinc/cp-kafka:latest</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">depends_on</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">zookeeper</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#e6db74">&#34;9092:9092&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">environment</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">KAFKA_BROKER_ID</span>: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">KAFKA_ZOOKEEPER_CONNECT</span>: <span style="color:#ae81ff">zookeeper:2181</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">KAFKA_ADVERTISED_LISTENERS</span>: <span style="color:#ae81ff">PLAINTEXT://localhost:9092</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">KAFKA_LISTENER_SECURITY_PROTOCOL_MAP</span>: <span style="color:#ae81ff">PLAINTEXT:PLAINTEXT</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">KAFKA_INTER_BROKER_LISTENER_NAME</span>: <span style="color:#ae81ff">PLAINTEXT</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR</span>: <span style="color:#ae81ff">1</span>
</span></span></code></pre></div><p>Start the containers:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker-compose up -d
</span></span></code></pre></div><ol start="3">
<li>
<p><strong>Maven</strong>: Ensure Maven is installed for dependency management.</p>
</li>
<li>
<p><strong>Spring Boot</strong>: Familiarity with Spring Boot basics.</p>
</li>
</ol>
<h2 id="1-spring-boot-project-setup">1. Spring Boot Project Setup<a hidden class="anchor" aria-hidden="true" href="#1-spring-boot-project-setup">#</a></h2>
<h3 id="add-dependencies">Add Dependencies<a hidden class="anchor" aria-hidden="true" href="#add-dependencies">#</a></h3>
<p>In your <code>pom.xml</code>, add the following dependency for Spring Kafka:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;groupId&gt;</span>org.springframework.kafka<span style="color:#f92672">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;artifactId&gt;</span>spring-kafka<span style="color:#f92672">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/dependency&gt;</span>
</span></span></code></pre></div><h3 id="configure-kafka-properties">Configure Kafka Properties<a hidden class="anchor" aria-hidden="true" href="#configure-kafka-properties">#</a></h3>
<p>Spring Boot&rsquo;s auto-configuration simplifies Kafka setup. Define Kafka-related properties in the <code>application.properties</code> file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-properties" data-lang="properties"><span style="display:flex;"><span><span style="color:#75715e"># Application Name</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">spring.application.name</span><span style="color:#f92672">=</span><span style="color:#e6db74">kafkalearning</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Kafka Broker Connection</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">spring.kafka.bootstrap-servers</span><span style="color:#f92672">=</span><span style="color:#e6db74">localhost:9092</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Producer Serialization Configurations</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">spring.kafka.producer.key-serializer</span><span style="color:#f92672">=</span><span style="color:#e6db74">org.apache.kafka.common.serialization.StringSerializer</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">spring.kafka.producer.value-serializer</span><span style="color:#f92672">=</span><span style="color:#e6db74">org.springframework.kafka.support.serializer.JsonSerializer</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Consumer Deserialization Configurations</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">spring.kafka.consumer.key-deserializer</span><span style="color:#f92672">=</span><span style="color:#e6db74">org.apache.kafka.common.serialization.StringDeserializer</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">spring.kafka.consumer.value-deserializer</span><span style="color:#f92672">=</span><span style="color:#e6db74">org.springframework.kafka.support.serializer.JsonDeserializer</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Disable Auto-Topic Creation</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">spring.kafka.admin.auto-create</span><span style="color:#f92672">=</span><span style="color:#e6db74">false</span>
</span></span></code></pre></div><h2 id="2-implementing-the-producer-consumer-and-controller">2. Implementing the Producer, Consumer, and Controller<a hidden class="anchor" aria-hidden="true" href="#2-implementing-the-producer-consumer-and-controller">#</a></h2>
<h3 id="producer-implementation">Producer Implementation<a hidden class="anchor" aria-hidden="true" href="#producer-implementation">#</a></h3>
<p>The producer component is responsible for sending messages to a Kafka topic. Here&rsquo;s the implementation:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> org.slf4j.Logger;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.slf4j.LoggerFactory;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.springframework.kafka.core.KafkaTemplate;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.springframework.stereotype.Component;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Component</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">testProducer</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> Logger log <span style="color:#f92672">=</span> LoggerFactory.<span style="color:#a6e22e">getLogger</span>(testProducer.<span style="color:#a6e22e">class</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> KafkaTemplate<span style="color:#f92672">&lt;</span>String, Object<span style="color:#f92672">&gt;</span> kafkaTemplate;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">testProducer</span>(KafkaTemplate<span style="color:#f92672">&lt;</span>String, Object<span style="color:#f92672">&gt;</span> kafkaTemplate) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">kafkaTemplate</span> <span style="color:#f92672">=</span> kafkaTemplate;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">sendMessage</span>(String topic, Object message) {
</span></span><span style="display:flex;"><span>        kafkaTemplate.<span style="color:#a6e22e">send</span>(topic, message);
</span></span><span style="display:flex;"><span>        log.<span style="color:#a6e22e">info</span>(<span style="color:#e6db74">&#34;Sent Message: &#34;</span> <span style="color:#f92672">+</span> message);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>Key Points:</strong></p>
<ul>
<li>The <code>KafkaTemplate</code> is auto-configured by Spring Boot and simplifies message sending.</li>
<li>The <code>sendMessage</code> method takes the topic name and message as parameters.</li>
</ul>
<h3 id="consumer-implementation">Consumer Implementation<a hidden class="anchor" aria-hidden="true" href="#consumer-implementation">#</a></h3>
<p>The consumer listens to a specific topic and processes incoming messages.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> org.slf4j.Logger;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.slf4j.LoggerFactory;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.springframework.kafka.annotation.KafkaListener;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.springframework.stereotype.Component;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Component</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">testConsumer</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> Logger log <span style="color:#f92672">=</span> LoggerFactory.<span style="color:#a6e22e">getLogger</span>(testConsumer.<span style="color:#a6e22e">class</span>);
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@KafkaListener</span>(topics <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;test-events&#34;</span>, groupId <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;groupA&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">consumerGroupA</span>(String message) {
</span></span><span style="display:flex;"><span>        log.<span style="color:#a6e22e">info</span>(<span style="color:#e6db74">&#34;Message received from producer: &#34;</span> <span style="color:#f92672">+</span> message);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>Key Points:</strong></p>
<ul>
<li>The <code>@KafkaListener</code> annotation binds the method to the <code>test-events</code> topic.</li>
<li>The <code>groupId</code> ensures that multiple instances of the same consumer process messages cooperatively.</li>
</ul>
<h3 id="controller-implementation">Controller Implementation<a hidden class="anchor" aria-hidden="true" href="#controller-implementation">#</a></h3>
<p>The controller acts as the entry point for testing the producer by exposing an API endpoint.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> org.slf4j.Logger;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.slf4j.LoggerFactory;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.springframework.beans.factory.annotation.Autowired;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.springframework.web.bind.annotation.PostMapping;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.springframework.web.bind.annotation.RequestParam;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.springframework.web.bind.annotation.RestController;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@RestController</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">testController</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> Logger log <span style="color:#f92672">=</span> LoggerFactory.<span style="color:#a6e22e">getLogger</span>(testController.<span style="color:#a6e22e">class</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> testProducer testProducer;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Autowired</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">testController</span>(testProducer testProducer) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">testProducer</span> <span style="color:#f92672">=</span> testProducer;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@PostMapping</span>(<span style="color:#e6db74">&#34;/testPublish&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">publishMessage</span>(<span style="color:#a6e22e">@RequestParam</span> String topic, <span style="color:#a6e22e">@RequestParam</span> String message) {
</span></span><span style="display:flex;"><span>        log.<span style="color:#a6e22e">info</span>(<span style="color:#e6db74">&#34;Inside the controller&#34;</span>);
</span></span><span style="display:flex;"><span>        testProducer.<span style="color:#a6e22e">sendMessage</span>(topic, message);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;Message sent to topic &#34;</span> <span style="color:#f92672">+</span> topic;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>Key Points:</strong></p>
<ul>
<li>The <code>@PostMapping</code> endpoint <code>/testPublish</code> accepts topic and message as query parameters.</li>
<li>The <code>testProducer</code> is injected into the controller to publish messages to Kafka.</li>
</ul>
<h2 id="3-defining-kafka-topics-in-configuration">3. Defining Kafka Topics in Configuration<a hidden class="anchor" aria-hidden="true" href="#3-defining-kafka-topics-in-configuration">#</a></h2>
<p>Instead of manually creating topics, you can define them in a configuration class. This ensures topics are created when the application starts:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> org.apache.kafka.clients.admin.NewTopic;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.springframework.context.annotation.Bean;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.springframework.context.annotation.Configuration;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> org.springframework.kafka.config.TopicBuilder;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Configuration</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">KafkaTopicConfig</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Bean</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> NewTopic <span style="color:#a6e22e">testTopic</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> TopicBuilder.<span style="color:#a6e22e">name</span>(<span style="color:#e6db74">&#34;test-events&#34;</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">build</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>Key Points:</strong></p>
<ul>
<li>Defining topics in configuration centralizes topic management.</li>
<li>The <code>@Bean</code> ensures the topic is created at application startup.</li>
</ul>
<h2 id="4-testing-the-application">4. Testing the Application<a hidden class="anchor" aria-hidden="true" href="#4-testing-the-application">#</a></h2>
<h3 id="start-the-kafka-environment">Start the Kafka Environment<a hidden class="anchor" aria-hidden="true" href="#start-the-kafka-environment">#</a></h3>
<p>Ensure that the Docker containers for Kafka and Zookeeper are running:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker-compose up -d
</span></span></code></pre></div><h3 id="run-the-application">Run the Application<a hidden class="anchor" aria-hidden="true" href="#run-the-application">#</a></h3>
<p>Start the Spring Boot application.</p>
<h3 id="publish-a-message">Publish a Message<a hidden class="anchor" aria-hidden="true" href="#publish-a-message">#</a></h3>
<p>Use a tool like cURL, Postman, or your browser to test the <code>/testPublish</code> endpoint:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -X POST <span style="color:#e6db74">&#34;http://localhost:8080/testPublish?topic=test-events&amp;message=HelloKafka&#34;</span>
</span></span></code></pre></div><h3 id="verify-the-output">Verify the Output<a hidden class="anchor" aria-hidden="true" href="#verify-the-output">#</a></h3>
<p><strong>Producer Logs:</strong></p>
<pre tabindex="0"><code>Sent Message: HelloKafka
</code></pre><p><strong>Consumer Logs:</strong></p>
<pre tabindex="0"><code>Message received from producer: HelloKafka
</code></pre><h2 id="5-advantages-of-auto-configuration">5. Advantages of Auto-Configuration<a hidden class="anchor" aria-hidden="true" href="#5-advantages-of-auto-configuration">#</a></h2>
<p>Using Spring Boot&rsquo;s auto-configuration simplifies the Kafka integration by:</p>
<ul>
<li>Eliminating boilerplate code.</li>
<li>Managing Kafka producer and consumer beans automatically.</li>
<li>Providing flexibility for topic configurations.</li>
</ul>
<p>However, if you need advanced configurations or custom behavior (e.g., transactional producers), you can define your own <code>ProducerFactory</code> and <code>KafkaTemplate</code> beans.</p>
<hr>
<p>And that&rsquo;s it! Finished! I hope you found this article useful. Integrating Kafka with Spring Boot allows for efficient event-driven system development. With Spring Kafka&rsquo;s auto-configuration, the complexities of message production and consumption are greatly reduced.</p>
<p>Happy coding with Kafka and Spring Boot!</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/kafka/">Kafka</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">praj-mkdir</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
